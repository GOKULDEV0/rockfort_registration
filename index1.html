<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rockfort - Official Appointment Letter</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- jsPDF Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #eef2f3;
            margin: 0;
            padding: 30px;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 50px;
            border-radius: 12px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            border-bottom: 2px solid #f7941d;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .header h1 { color: #0f1c3f; margin: 0; text-transform: uppercase; }
        .header p { color: #666; margin-top: 5px; font-size: 0.9rem; }

        /* Sections */
        .section-box {
            background: #f8f9fa;
            padding: 15px;
            border-left: 5px solid #0f1c3f;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-weight: 700;
            color: #0f1c3f;
            text-transform: uppercase;
            margin-bottom: 15px;
            font-size: 1rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* 2 Columns */
            gap: 20px;
        }

        .full-width { grid-column: 1 / -1; }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 0.9rem;
            color: #444;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 14px;
            box-sizing: border-box; /* Fixes padding issues */
        }

        .btn {
            background-color: #0f1c3f;
            color: white;
            padding: 18px;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            font-weight: bold;
            transition: 0.3s;
        }

        .btn:hover { background-color: #f7941d; }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <h1>Rockfort Stay Inn</h1>
            <p>Employee Appointment Letter Generator</p>
        </div>

        <form id="apptForm">
            
            <!-- 1. PERSONAL DETAILS -->
            <div class="section-box">
                <div class="section-title"><i class="fa-solid fa-user"></i> Candidate Profile</div>
                <div class="form-grid">
                    <div><label>Full Name</label><input type="text" id="empName" placeholder="e.g. Jagan Elangovan"></div>
                    <div><label>Mobile Number</label><input type="text" id="empPhone" placeholder="+91 99999 99999"></div>
                    <div>
                        <label>ID Proof Type</label>
                        <select id="idType">
                            <option value="Aadhar Card">Aadhar Card</option>
                            <option value="PAN Card">PAN Card</option>
                            <option value="Driving License">Driving License</option>
                            <option value="Voter ID">Voter ID</option>
                            <option value="Passport">Passport</option>
                        </select>
                    </div>
                    <div>
                        <label>ID Proof Number</label>
                        <input type="text" id="idNum" placeholder="XXXX XXXX XXXX">
                    </div>
                    <div><label>Date of Birth</label><input type="date" id="dob"></div>
                    <div class="full-width"><label>Permanent Residential Address</label><textarea id="address" rows="2" placeholder="Door No, Street, City, State, Pincode"></textarea></div>
                </div>
            </div>

            <!-- 2. EMERGENCY CONTACT -->
            <div class="section-box">
                <div class="section-title"><i class="fa-solid fa-phone-volume"></i> Emergency Contact</div>
                <div class="form-grid">
                    <div><label>Contact Name</label><input type="text" id="kinName" placeholder="Name of Relative"></div>
                    <div><label>Relationship</label>
                        <select id="relationship">
                            <option value="Father">Father</option>
                            <option value="Mother">Mother</option>
                            <option value="Spouse">Spouse</option>
                            <option value="Guardian">Guardian</option>
                        </select>
                    </div>
                    <div class="full-width"><label>Emergency Phone No</label><input type="text" id="kinPhone" placeholder="Relative's Number"></div>
                </div>
            </div>

            <!-- 3. JOB DETAILS -->
            <div class="section-box">
                <div class="section-title"><i class="fa-solid fa-briefcase"></i> Employment Details</div>
                <div class="form-grid">
                    <div><label>Designation</label><input type="text" id="designation" placeholder="e.g. Supervisor"></div>
                    <div><label>Department</label><input type="text" id="department" placeholder="e.g. Housekeeping"></div>
                    <div><label>Date of Joining</label><input type="text" id="doj" placeholder="DD-MM-YYYY"></div>
                    <div><label>Probation Period</label>
                        <select id="probation">
                            <option value="3 Months">3 Months</option>
                            <option value="6 Months">6 Months</option>
                            <option value="None">Direct Confirmation</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- 4. SALARY -->
            <div class="section-box">
                <div class="section-title"><i class="fa-solid fa-money-bill-wave"></i> Compensation</div>
                <div class="form-grid">
                    <div><label>Monthly Salary (INR)</label><input type="text" id="salary" placeholder="e.g. 15,000"></div>
                    <div><label>Accommodation Benefits</label>
                        <select id="benefits">
                            <option value="Food & Accommodation Included">Food & Accommodation Included</option>
                            <option value="Accommodation Only">Accommodation Only</option>
                            <option value="Salary Only (No Stay)">Salary Only (No Stay)</option>
                        </select>
                    </div>
                </div>
            </div>

            <button type="button" class="btn" onclick="generatePDF()">Generate Official Letter</button>
        </form>
    </div>

    <script>
        // Auto-fill today's date
        const d = new Date();
        document.getElementById('doj').value = `${d.getDate()}-${d.getMonth()+1}-${d.getFullYear()}`;

        function loadImage(url) {
            return new Promise((resolve) => {
                const img = new Image();
                img.src = url;
                img.onload = () => resolve(img);
                img.onerror = () => resolve(null);
            });
        }

        async function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('p', 'mm', 'a4');
            const width = doc.internal.pageSize.getWidth(); // 210mm
            const height = doc.internal.pageSize.getHeight(); // 297mm
            const margin = 20;
            const rightColX = 115; // Starting X for the right column

            // Load Background
            const bgImage = await loadImage("images/background.png");
            if (bgImage) doc.addImage(bgImage, 'PNG', 0, 0, width, height);

            // ===============================================
            // PAGE 1: DETAILS
            // ===============================================

            // 1. Header Title
            doc.setFont("times", "bold");
            doc.setFontSize(16);
            doc.setTextColor(0, 0, 0);
            doc.text("APPOINTMENT LETTER", width / 2, 55, { align: "center" });
            doc.setLineWidth(0.7);
            doc.line(75, 57, 135, 57); // Underline

            let y = 70;
            const lineSpace = 9; // Increased spacing for better readability

            // Helper to draw Section Lines
            function drawSeparator() {
                y += 2;
                doc.setDrawColor(200, 200, 200); // Light Gray
                doc.line(margin, y, 190, y);
                y += 8;
            }

            // Helper for Data Rows (Two Columns)
            function addDataRow(label1, val1, label2, val2) {
                // Left
                doc.setFont("times", "bold");
                doc.setFontSize(11);
                doc.text(label1, margin, y);
                doc.setFont("times", "normal");
                doc.setFontSize(11); // Bigger font
                doc.text(":  " + val1, margin + 45, y);

                // Right
                if (label2) {
                    doc.setFont("times", "bold");
                    doc.text(label2, rightColX, y);
                    doc.setFont("times", "normal");
                    doc.text(":  " + val2, rightColX + 30, y);
                }
                y += lineSpace;
            }

            // SECTION 1: EMPLOYEE DETAILS
            doc.setFont("times", "bold");
            doc.setFontSize(12);
            doc.setTextColor(15, 28, 63); // Navy
            doc.text("1. EMPLOYEE DETAILS", margin, y);
            doc.setTextColor(0); // Reset
            y += 8;

            addDataRow("Name", document.getElementById('empName').value, "Phone", document.getElementById('empPhone').value);
            addDataRow(document.getElementById('idType').value, document.getElementById('idNum').value, "DOB", document.getElementById('dob').value);
            
            // Address (Full Width)
            doc.setFont("times", "bold");
            doc.text("Address", margin, y);
            doc.setFont("times", "normal");
            const addr = doc.splitTextToSize(":  " + document.getElementById('address').value, 150);
            doc.text(addr, margin + 45, y);
            y += (addr.length * 6) + 2;

            drawSeparator();

            // SECTION 2: EMERGENCY CONTACT
            doc.setFont("times", "bold");
            doc.setFontSize(12);
            doc.setTextColor(15, 28, 63);
            doc.text("2. EMERGENCY CONTACT", margin, y);
            doc.setTextColor(0);
            y += 8;

            addDataRow("Name", document.getElementById('kinName').value, "Relation", document.getElementById('relationship').value);
            addDataRow("Phone No", document.getElementById('kinPhone').value, "", "");
            
            drawSeparator();

            // SECTION 3: EMPLOYMENT DETAILS
            doc.setFont("times", "bold");
            doc.setFontSize(12);
            doc.setTextColor(15, 28, 63);
            doc.text("3. EMPLOYMENT DETAILS", margin, y);
            doc.setTextColor(0);
            y += 8;

            addDataRow("Designation", document.getElementById('designation').value, "Department", document.getElementById('department').value);
            addDataRow("Date of Joining", document.getElementById('doj').value, "Probation", document.getElementById('probation').value);
            
            drawSeparator();

            // SECTION 4: COMPENSATION
            doc.setFont("times", "bold");
            doc.setFontSize(12);
            doc.setTextColor(15, 28, 63);
            doc.text("4. COMPENSATION STRUCTURE", margin, y);
            doc.setTextColor(0);
            y += 8;

            addDataRow("Monthly Salary", "INR " + document.getElementById('salary').value, "", "");
            // Benefits wrap
            doc.setFont("times", "bold");
            doc.text("Benefits", margin, y);
            doc.setFont("times", "normal");
            doc.text(":  " + document.getElementById('benefits').value, margin + 45, y);
            y += 15;

            // BRANDING CENTER
            doc.setFont("times", "bolditalic");
            doc.setFontSize(14);
            doc.setTextColor(200, 50, 50); // Red
            doc.text("ROCKFORT STAY INN", width / 2, y, { align: "center" });
            doc.setTextColor(0);
            y += 10;

            // INTRO TO RULES (Start on Page 1 to fill space)
            doc.setFont("times", "bolditalic");
            doc.setFontSize(11);
            doc.text("Staff Regulations and Standards:", margin, y);
            y += 7;

            doc.setFont("times", "normal");
            doc.setFontSize(10); // Standard text size

            const rules1 = [
                "1) PROPERTY CARE: You will always maintain in good condition Company property, which may be entrusted to you for official use during the course of your employment and shall return all such property to the Company prior to relinquishment of your charge, failing which the cost of the same will be recovered from you by the Company.",
                "2) PUNCTUALITY: You must arrive on time for work, any personal reasons for delay should be communicated immediately by telephone, failing which it will be treated as absence without leave."

            ];

            rules1.forEach(rule => {
                const text = doc.splitTextToSize(rule, 170);
                doc.text(text, margin, y);
                y += (text.length * 5) + 3;
            });


            // ===============================================
            // PAGE 2: TERMS & SIGNATURES
            // ===============================================
            doc.addPage();
            if (bgImage) doc.addImage(bgImage, 'PNG', 0, 0, width, height);

            y = 50; // Start at top margin

            const rules2 = [
                "3) An employee working in this company should not share important information of this company with others You must not take this company's information anywhere else or you will be penalized for doing so.",
                "4) If you fail to do what the manager of this company tells you to do or argue with him personally, it is rude and this company can suspend you at any time.",
                "5)If your friends or relatives are coming during your stay you should post it immediately with the company.",
                "6) If you pick up any of the guest's belongings while you are cleaning the guest's room, you must bring it to the management immediately.",
                "7)Even if you drink alcohol or take drugs while working, Immediately the worker will be surrendered to the police, not only that, he will be fired immediately and the company will not be able to pay him for the days he worked,",
                "8)Your monthly salary will arrive in your account on the 10th of every month, no advance can be paid before the salary date.",
                "9)If you are going to terminate the employments of this company you must tell the company 30 days in advance, if anything goes wrong, the company will not to be able to pay you the salary for the days worked."
            ];

            rules2.forEach(rule => {
                const text = doc.splitTextToSize(rule, 170);
                doc.text(text, margin, y);
                y += (text.length * 5) + 4;
            });

            // Declaration
            y += 10;
            doc.setFont("times", "italic");
            doc.setFontSize(10);
            const declaration = "I have read and understood the terms and conditions mentioned above. I accept this appointment and agree to abide by the rules of Rockfort Stay Inn.";
            doc.text(doc.splitTextToSize(declaration, 170), margin, y);


            // ===============================================
            // SIGNATURES (LEFT & RIGHT ALIGNMENT)
            // ===============================================
            // Position signatures at the bottom
            y = 240; 

            doc.setFont("times", "bold");
            doc.setFontSize(11);
            doc.setTextColor(0);

            // --- LEFT SIDE: EMPLOYEE ---
            const leftSigX = margin;
            doc.text("Accepted By (Employee):", leftSigX, y);
            
            // Name
            doc.setFont("times", "normal");
            doc.text(document.getElementById('empName').value, leftSigX, y + 10);
            
            // Line
            doc.line(leftSigX, y + 25, leftSigX + 60, y + 25);
            
            // Label
            doc.setFont("times", "bold");
            doc.text("Signature & Date", leftSigX, y + 32);


            // --- RIGHT SIDE: AUTHORIZED SIGNATORY ---
            const rightSigX = 120;
            doc.text("Authorized Signatory:", rightSigX, y);
            
            // Name
            doc.setFont("times", "normal");
            
            
            // Line
            doc.line(rightSigX, y + 25, rightSigX + 60, y + 25);
            doc.text("Manager", rightSigX, y + 10);
            
            // Label
            doc.setFont("times", "bold");
            doc.text("Rockfort Stay Inn", rightSigX, y + 32);

            // Save PDF
            doc.save(`Appointment_${document.getElementById('empName').value}.pdf`);
        }
    </script>
</body>
</html>